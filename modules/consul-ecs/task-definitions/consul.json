[
  {
    "name": "consul",
    "image": "consul:${consul_version}",
    "essential": true,
    "memory": 256,
    "memoryReservation": 128,
    "command": [ "consul", "agent", "-config-file=/consul/config/consul.conf" ],
    "portMappings": [
      {
        "containerPort": 8300,
        "hostPort": 8300,
        "protocol": "tcp"
      },
      {
        "containerPort": 8301,
        "hostPort": 8301,
        "protocol": "tcp"
      },
      {
        "containerPort": 8302,
        "hostPort": 8302,
        "protocol": "tcp"
      },
      {
        "containerPort": 8301,
        "hostPort": 8301,
        "protocol": "udp"
      },
      {
        "containerPort": 8302,
        "hostPort": 8302,
        "protocol": "udp"
      },
      {
        "containerPort": 8400,
        "hostPort": 8400,
        "protocol": "tcp"
      },
      {
        "containerPort": 8500,
        "hostPort": 8500,
        "protocol": "tcp"
      },
      {
        "containerPort": 8600,
        "hostPort": 8600,
        "protocol": "udp"
      }
    ],
    "mountPoints": [
      {
        "sourceVolume": "consulconfig",
        "containerPath": "/consul/config"
      }
    ],
    "environment": [
      { "name": "AWS_REGION", "value": "${region}" }
    ]
  }
]
